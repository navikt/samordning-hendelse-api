CREATE TABLE IF NOT EXISTS HENDELSER
(
    ID            SERIAL PRIMARY KEY,
    TPNR          VARCHAR(20),
    HENDELSE_DATA JSON
);

CREATE TABLE IF NOT EXISTS YTELSE_HENDELSER
(
    ID                  BIGSERIAL PRIMARY KEY,
    SEKVENSNUMMER       BIGSERIAL not null,
    TPNR                VARCHAR(20) not null,
    MOTTAKER            VARCHAR(20) not null,
    IDENTIFIKATOR       VARCHAR(20) not null,
    HENDELSE_TYPE       VARCHAR(20) not null,
    YTELSE_TYPE         VARCHAR(20) not null,
    DATO_BRUK_FOM       TIMESTAMP   not null,
    DATO_BRUK_TOM       TIMESTAMP
);

CREATE TABLE IF NOT EXISTS PERSON_ENDRING
(
    ID                  BIGSERIAL PRIMARY KEY,
    SEKVENSNUMMER       BIGSERIAL not null,
    TPNR                VARCHAR(20) not null,
    FNR                 VARCHAR(20) not null,
    FNR_GAMMELT         VARCHAR(20),
    SIVILSTAND          VARCHAR(20),
    SIVILSTAND_DATO     DATE,
    DOEDSDATO           DATE,
    MELDINGSKODE        VARCHAR(20) not null
    );


CREATE TABLE IF NOT EXISTS PERSON_HENDELSE
(
    HENDELSE_ID            CHAR(36) NOT NULL,
    MELDINGSKODE           VARCHAR(20) NOT NULL,
    OPPRETTET_TIDSPUNKT    TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT PERSON_HENDELSE_PK PRIMARY KEY (HENDELSE_ID, MELDINGSKODE)
);

CREATE TABLE IF NOT EXISTS MANGLENDE_REFUSJONSKRAV
(
    ID                  BIGSERIAL PRIMARY KEY,
    SEKVENSNUMMER       BIGSERIAL not null,
    TPNR                VARCHAR(20) not null,
    FNR                 VARCHAR(20) not null,
    SAM_ID              VARCHAR(20) not null,
    SVARFRIST           DATE not null
);